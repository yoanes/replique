task up(type: Exec) {
    workingDir = "$projectDir"
    commandLine = ['vagrant', 'up', 'site', '--provider=virtualbox']
}

task destroy(type: Exec) {
   ignoreExitValue = true
   workingDir = "$projectDir"
   commandLine = ['vagrant', 'destroy', '-f', 'site']  
}

task provision(type: Exec) {
   workingDir = "$projectDir"
   commandLine = ['vagrant', 'up', 'site-provision', '--provider=virtualbox']
}

task destroyProvision(type: Exec) {
    workingDir = "$projectDir"
    commandLine = ['vagrant', 'destroy', '-f', 'site-provision']
}

task reprovision(dependsOn: ['destroyProvision', 'provision'])

task packageBox(type: Exec, dependsOn: reprovision){
    workingDir = "$projectDir"
    commandLine = ['vagrant', 'package', '--base=replique-site-base', '--output=site.box']
}

task startDevServer(type: Exec) {
    workingDir = "$projectDir"
    commandLine = ['vagrant', 'ssh', 'site', '-c', '/opt/work/site/bin/cake server -H 0.0.0.0']
}

